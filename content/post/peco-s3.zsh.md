+++
date = "2017-05-12T00:46:00+09:00"
title = "peco で S3 のバケット・ファイル一覧を見るやつを作ったらめちゃくちゃ便利なのができた"
images = ["/images/peco-s3.zsh/screenshot.gif"]
+++

釣りっぽいタイトルにしてしまったけどまぁ主観なので...

* [yuya-takeyama/peco-s3.zsh](https://github.com/yuya-takeyama/peco-s3.zsh)

<!--more-->

これがどんなものなのかはこのスクリーンキャストを見てもらうのが一番良いでしょう。

![Screenshot](/images/peco-s3.zsh/screenshot.gif)

## 機能

### バケットの一覧化

このスクリーンキャストではバケット名を指定してその中身を一覧化していますが、引数を省略した場合はバケットの一覧が表示され、選択することでさらにその中のファイルを一覧化することができます。

### 元の一覧に戻る

バケット・ディレクトリの中に移動したあとで Esc を押すと元のディレクトリに戻ることができます。

### peco によるフィルタ

[peco](https://github.com/peco/peco) をベースとしているので、文字列で対象をフィルタしながらファイル・ディレクトリを選択することができます。

### s3cat コマンドの生成

ファイルを選択すると、そのファイルを出力するための `s3cat` コマンドがプロンプトに出力されます。

そのまま実行すればファイルを出力できますし、パイプでつないで別のコマンドに繋げていくこともできます。

### ファイルの再帰的な一覧化

`--recursive` (`-r`) オプションを使うことで、ディレクトリ以下のファイルも再帰的に取得し、全て一覧化することができます。

## 使い方・インストール手順

GitHub の `README.md` を参照してください。

* [yuya-takeyama/peco-s3.zsh](https://github.com/yuya-takeyama/peco-s3.zsh)

## 終わりに

zsh というかシェルスクリプトはあんまり得意じゃないので、コード的には結構拙い感じだと思います。  
良ければ Pull Request ください。
